@using DaLiExpress.Models
@model DaLiExpress.Models.Game
@{
    ViewBag.Title = "Special Page";
}
<h2>Ultra fancy super rare special page</h2>
<table class="table">
    <tr>
        <th>Best Rated Games</th>
        <td>@(string.Join(", ", ViewBag.BestRatedGames) == string.Empty ? "There are not enough games to determine the best rated game" : string.Join(", ", ViewBag.BestRatedGames))</td>

    </tr>
    <tr>
        <th>Most Productive Developer Studio</th>
        <td>@(string.Join(", ", ViewBag.MostProductiveStudio) == string.Empty ? "There are not enough developer studios to determine the most productive one" : string.Join(", ", ViewBag.MostProductiveStudio))</td>

    </tr>
    <tr>
        <th>Most Lazy Developer Studio</th>
        <td>@(string.Join(", ", ViewBag.LeastProductiveStudio) == string.Empty ? "There are not enough developer studios to determine the most productive one" : string.Join(", ", ViewBag.LeastProductiveStudio))</td>
    </tr>
    <tr>
        <th>Most Popular Platforms</th>
        <td>@(string.Join(", ", ViewBag.MostPopularPlatforms) == string.Empty ? "There are not enough games & platform to determine the most popular" : string.Join(", ", ViewBag.MostPopularPlatforms))</td>
    </tr>
    <tr>
        <th>Least Popular Platforms</th>
        <td>@(string.Join(", ", ViewBag.LeastPopularPlatforms) == string.Empty ? "There are not enough games & platform to determine the least popular" : string.Join(", ", ViewBag.LeastPopularPlatforms))</td>
    </tr>
</table>
@using (Html.BeginForm())
{
    if (Model == null)
    {
        <h4>Don't know what to play? Click here and we will give you a surprise :)</h4>
        <input type="submit" value="Whaaat? A surprise?" height="10" class="btn btn-default" id="search-btn" autofocus />
    }
    else
    {
        <h4>We personally selected this game for you, we hope you will enjoy it</h4>
        <table class="table">
            <tr>
                <th>@Html.DisplayNameFor(model=>model.ID)</th>
                <th>@Html.DisplayNameFor(model=>model.Name)</th>
                <th>@Html.DisplayNameFor(model=>model.Rating)</th>
                <th>@Html.DisplayNameFor(model=>model.Release)</th>
                <th>@Html.DisplayNameFor(model=>model.Publisher)</th>
                <th>@Html.DisplayNameFor(model=>model.Platform)</th>
                <th>@Html.DisplayNameFor(model=>model.DeveloperStudio)</th>
            </tr>
            <tr>
                <td>@Model.ID</td>
                <td>@Model.Name</td>
                <td>@Model.Rating</td>
                <td>@Model.Release.ToShortDateString()</td>
                <td>@(Model.PublisherID == null ? "Game is not published yet" : Model.Publisher.Name)</td>
                <td>@(string.Join(", ", Model.Platform.Select(p => p.Name).ToList()) == string.Empty ? "Game is not released on a platform yet" : (string.Join(", ", Model.Platform.Select(p => p.Name).ToList())))</td>
                <td>@(string.Join(", ", Model.DeveloperStudio.Select(d => d.Name).ToList()) == string.Empty ? "Game is not developed yet" : string.Join(", ", Model.DeveloperStudio.Select(p => p.Name).ToList()))</td>
            </tr>
        </table>
        <h4>Want to go again?</h4>
        <input type="submit" value="Hell yeah" height="10" class="btn btn-default" id="search-btn" autofocus />
    }
}